<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <meta name="viewport" content="width=device-width">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="resources/se1-pwa/manifest.json">
    <script>
        (function () {
            'use strict';

            if (!('serviceWorker' in navigator)) {
                console.log("Service Worker not supported");
                return;
            }
            navigator.serviceWorker.register('resources/se1-pwa/service-worker.js', {
                scope: '.'
            })
                .then(function () {
                    console.log('Registered');
                })
                .catch(function (error) {
                    console.log('Registration failed:', error);
                });

            navigator.serviceWorker.addEventListener('controllerchange', function (event) {
                console.log(
                    '[controllerchange] A "controllerchange" event has happened ' +
                    'within navigator.serviceWorker: ', event
                );
                navigator.serviceWorker.controller.addEventListener('statechange',
                    function () {
                        console.log('[controllerchange][statechange] ' +
                            'A "statechange" has occured: ', this.state
                        );
                        if (this.state === 'activated') {
                            Notification.requestPermission().then(function (premission) {
                                if (premission === "granted") {
                                    navigator.serviceWorker.ready.then(function (registration) {
                                        registration.showNotification("Is now offline usable!", {
                                            vibrate: [500, 110, 500, 110, 450, 110, 200, 110, 170, 40, 450, 110, 200, 110, 170, 40, 500],
                                        });
                                    });
                                }
                                console.log("Is now offline usable!");
                            })
                        }
                    }
                );
            });
            navigator.serviceWorker.addEventListener('message', function(event){
                Notification.requestPermission().then(function (premission) {
                    if (premission === "granted") {
                        navigator.serviceWorker.ready.then(function (registration) {
                            registration.showNotification("Es gibt neue Daten in deinem Cache Probier sie mal aus!!", {
                                vibrate: [500, 110, 500, 110, 450, 110, 200, 110, 170, 40, 450, 110, 200, 110, 170, 40, 500],
                            });
                        });
                    }
                })
            })
        })();
    </script>
</head>
<script src="https://akless.github.io/ccm/ccm.js"></script>
<script src="resources/se1-pwa/ccm.se1-menu.js"></script>
<ccm-se1-menu
        inner='["//kaul.inf.h-brs.de/data/2017/se1/le00.html","//kaul.inf.h-brs.de/data/2017/se1/le01.html","//kaul.inf.h-brs.de/data/2017/se1/le03.html"]'></ccm-se1-menu>